<html>

<head>
<title>hi update</title>
</head>

<style>
</style>


<script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
<link href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
<script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>

<script>
	var baseUrl ="http://"+location.host;
	$(document).ready(function() {
		// query
		var name=document.getElementById("s_name").value
		$.ajax({
			url:baseUrl+"/update/",
			type:'GET',
			timeout : 5000,
			data: {name:name},
			contentType: "application/json",
			dataType: 'json',
			success: function (result) {
            	console.log(JSON.stringify(result))
           	},
            error: function () {
            	console.log(JSON.stringify(result))
			}
        });
		// update
		$("#btn_update").on("click", function() {
			var name=document.getElementById("s_name").value
			var done=document.getElementById("box_done").value
			var todo=document.getElementById("box_todo").value
			var issue=document.getElementById("box_issue").value
			var dataObject={"name":name,"done":done,"todo":todo,"issue":issue}
			$.ajax({
				url:baseUrl+"/update/",
				type:'PUT',
				timeout : 5000,
				data: JSON.stringify(dataObject),
				contentType: "application/json",
				dataType: 'json',
				success: function (result) {
					alert("更新成功");
            	},
	            error: function () {
	               alert("失败");
	            	console.log(JSON.stringify(result))
				}
	        });
		});
	});		
</script>

<body>

<div class="container">
	<div>
		<label for="s_name">我是: </label>
		<select class="form-control" id="s_name">
			<option>Mustard</option>
			<option>Zhang</option> 
	    </select>   
	</div>
	<div>
		<p id="t_done">昨天:</p>
		<textarea class="form-control" rows="5" id="box_done" type="text"></textarea>
	<div>
		<p>今天:</p>
		<textarea class="form-control" rows="5" id="box_todo" type="text"></textarea>
	</div>
	<div>
		<p>问题:</p>
		<textarea class="form-control" rows="5" id="box_issue" type="text"></textarea>
	</div>
	<div>
		<button class="btn btn-primary btn-large" id="btn_update">提交</button>
	</div>
</div>

</body>

</html>